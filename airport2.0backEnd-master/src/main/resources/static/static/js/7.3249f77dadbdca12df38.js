webpackJsonp([7],{Bdvm:function(t,e){},JzDN:function(t,e){},Qr4b:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("3cXf"),s=a.n(i),l=a("x3UN"),n=a("cn9w"),r={data:function(){return{selectType:"",typeList:[],tableData:[],subTableData:[],temp:0,currentPage:1,totalCount:0,pageSizes:[10,15,20],PageSize:10,prioritySettingDialog:!1,tempList:[{id:0,tempName:"不划分"},{id:1,tempName:"根据停靠时间划分"},{id:2,tempName:"根据进出港时间划分"}],selectTypeSetting:0,typeListSetting:[{id:0,flighttype:"公务航班",flightkey:"GW"},{id:1,flighttype:"国际航班",flightkey:"GJ"},{id:2,flighttype:"VIP航班",flightkey:"VIP"},{id:3,flighttype:"过站航班",flightkey:"GZ"},{id:4,flighttype:"普通航班",flightkey:"PT"},{id:5,flighttype:"过夜航班",flightkey:"GY"}],settingTableData:[],subSettingTableData:[],parkingGate:0,parkingGateList:[],priorityList:[],delSettingData:[],addSettingData:[],UpdateSettingData:[]}},methods:{handleSizeChange:function(t){this.PageSize=t,this.currentPage=1},handleCurrentChange:function(t){this.currentPage=t},openPrioritySettingDialog:function(){this.settingTableData=JSON.parse(s()(this.tableData)),this.prioritySettingDialog=!0},prioritySettingCancel:function(){this.prioritySettingDialog=!1,this.tableData=JSON.parse(s()(this.subTableData))},prioritySettingConfirm:function(){var t=this,e=this.typeListSetting.findIndex(function(e){if(e.id==t.selectTypeSetting)return!0}),a={airportname:this.$store.state.airportNameVuex,flighttype:this.typeListSetting[e].flighttype,userId:window.sessionStorage.usernamen};0===this.subSettingTableData.length?Object(l.f)(a).then(function(){var e={airportname:t.$store.state.airportNameVuex,userId:window.sessionStorage.usernamen};Object(l.I)(e).then(function(e){t.typeList=[];for(var a=0;a<e.data.length;a++){var i={id:a,flighttype:e.data[a].flighttype};t.typeList.push(i)}t.selectType="",t.tableData=[],t.totalCount=0,t.prioritySettingDialog=!1})}):Object(l.f)(a).then(function(){var e=[];if(0==t.subSettingTableData[0].template)for(var a=0;a<t.subSettingTableData.length;a++){var i={airportname:t.subSettingTableData[a].airportname,groupid:a,flighttype:t.subSettingTableData[a].flighttype,flightkey:t.subSettingTableData[a].flightkey,template:t.subSettingTableData[a].template,businesskey:0,businessvalue:t.subSettingTableData[a].parkinggate,userId:window.sessionStorage.usernamen,updateTime:Object(n.c)()},r={airportname:t.subSettingTableData[a].airportname,groupid:a,flighttype:t.subSettingTableData[a].flighttype,flightkey:t.subSettingTableData[a].flightkey,template:t.subSettingTableData[a].template,businesskey:1,businessvalue:t.subSettingTableData[a].priority,userId:window.sessionStorage.usernamen,updateTime:Object(n.c)()};e.push(i),e.push(r)}if(1==t.subSettingTableData[0].template)for(var p=0;p<t.subSettingTableData.length;p++){var o={airportname:t.subSettingTableData[p].airportname,groupid:p,flighttype:t.subSettingTableData[p].flighttype,flightkey:t.subSettingTableData[p].flightkey,template:t.subSettingTableData[p].template,businesskey:0,businessvalue:t.subSettingTableData[p].parkinggate,userId:window.sessionStorage.usernamen,updateTime:Object(n.c)()},g={airportname:t.subSettingTableData[p].airportname,groupid:p,flighttype:t.subSettingTableData[p].flighttype,flightkey:t.subSettingTableData[p].flightkey,template:t.subSettingTableData[p].template,businesskey:1,businessvalue:t.subSettingTableData[p].priority,userId:window.sessionStorage.usernamen,updateTime:Object(n.c)()},u={airportname:t.subSettingTableData[p].airportname,groupid:p,flighttype:t.subSettingTableData[p].flighttype,flightkey:t.subSettingTableData[p].flightkey,template:t.subSettingTableData[p].template,businesskey:6,businessvalue:t.subSettingTableData[p].stoptimeless,userId:window.sessionStorage.usernamen,updateTime:Object(n.c)()},b={airportname:t.subSettingTableData[p].airportname,groupid:p,flighttype:t.subSettingTableData[p].flighttype,flightkey:t.subSettingTableData[p].flightkey,template:t.subSettingTableData[p].template,businesskey:7,businessvalue:t.subSettingTableData[p].stoptimemore,userId:window.sessionStorage.usernamen,updateTime:Object(n.c)()};e.push(o),e.push(g),e.push(u),e.push(b)}if(2==t.subSettingTableData[0].template)for(var m=0;m<t.subSettingTableData.length;m++){var h={airportname:t.subSettingTableData[m].airportname,groupid:m,flighttype:t.subSettingTableData[m].flighttype,flightkey:t.subSettingTableData[m].flightkey,template:t.subSettingTableData[m].template,businesskey:0,businessvalue:t.subSettingTableData[m].parkinggate,userId:window.sessionStorage.usernamen,updateTime:Object(n.c)()},c={airportname:t.subSettingTableData[m].airportname,groupid:m,flighttype:t.subSettingTableData[m].flighttype,flightkey:t.subSettingTableData[m].flightkey,template:t.subSettingTableData[m].template,businesskey:1,businessvalue:t.subSettingTableData[m].priority,userId:window.sessionStorage.usernamen,updateTime:Object(n.c)()},d={airportname:t.subSettingTableData[m].airportname,groupid:m,flighttype:t.subSettingTableData[m].flighttype,flightkey:t.subSettingTableData[m].flightkey,template:t.subSettingTableData[m].template,businesskey:2,businessvalue:t.subSettingTableData[m].atimeless,userId:window.sessionStorage.usernamen,updateTime:Object(n.c)()},y={airportname:t.subSettingTableData[m].airportname,groupid:m,flighttype:t.subSettingTableData[m].flighttype,flightkey:t.subSettingTableData[m].flightkey,template:t.subSettingTableData[m].template,businesskey:3,businessvalue:t.subSettingTableData[m].atimemore,userId:window.sessionStorage.usernamen,updateTime:Object(n.c)()},f={airportname:t.subSettingTableData[m].airportname,groupid:m,flighttype:t.subSettingTableData[m].flighttype,flightkey:t.subSettingTableData[m].flightkey,template:t.subSettingTableData[m].template,businesskey:4,businessvalue:t.subSettingTableData[m].dtimeless,userId:window.sessionStorage.usernamen,updateTime:Object(n.c)()},S={airportname:t.subSettingTableData[m].airportname,groupid:m,flighttype:t.subSettingTableData[m].flighttype,flightkey:t.subSettingTableData[m].flightkey,template:t.subSettingTableData[m].template,businesskey:5,businessvalue:t.subSettingTableData[m].dtimemore,userId:window.sessionStorage.usernamen,updateTime:Object(n.c)()};e.push(h),e.push(c),e.push(d),e.push(y),e.push(f),e.push(S)}Object(l.s)(e).then(function(){var e={airportname:t.$store.state.airportNameVuex,userId:window.sessionStorage.usernamen};Object(l.I)(e).then(function(e){t.typeList=[];for(var a=0;a<e.data.length;a++){var i={id:a,flighttype:e.data[a].flighttype};t.typeList.push(i)}var n=t.typeList.findIndex(function(e){if(e.flighttype==t.typeListSetting[t.selectTypeSetting].flighttype)return!0});t.selectType=t.typeList[n].id;var r={airportname:t.$store.state.airportNameVuex,flighttype:t.typeList[n].flighttype,userId:window.sessionStorage.usernamen};Object(l.C)(r).then(function(e){t.subSettingTableData=[],t.tableData=JSON.parse(s()(e.data)),t.totalCount=t.tableData.length,t.subTableData=JSON.parse(s()(t.tableData)),t.settingTableData=JSON.parse(s()(t.tableData)),t.temp=t.subTableData[0].template,t.prioritySettingDialog=!1})})})})},delSettintData:function(t){this.delSettingData=[];var e=this.settingTableData.findIndex(function(e){if(e.id==t)return!0});this.delSettingData.push(this.settingTableData[e]),this.settingTableData.splice(e,1)},addSettintData:function(){var t=this;if(0===this.tableData.length){var e=[],a=0;if(0!=this.settingTableData.length){for(var i=0;i<this.settingTableData.length;i++)e.push(this.settingTableData[i].id);a=Math.max.apply(null,e)+1}var s=this.typeListSetting.findIndex(function(e){if(e.id==t.selectTypeSetting)return!0}),l={id:a,airportname:this.$store.state.airportNameVuex,flighttype:this.typeListSetting[s].flighttype,flightkey:this.typeListSetting[s].flightkey,template:this.temp,parkinggate:0,priority:0,stoptimeless:"",stoptimemore:"",atimeless:"",atimemore:"",dtimeless:"",dtimemore:""};this.settingTableData.push(l)}if(0!==this.tableData.length){var n=[],r=0;if(0!=this.settingTableData.length){for(var p=0;p<this.settingTableData.length;p++)n.push(this.settingTableData[p].id);r=Math.max.apply(null,n)+1}var o={id:r,airportname:this.tableData[0].airportname,flighttype:this.tableData[0].flighttype,flightkey:this.tableData[0].flightkey,template:this.tableData[0].template,parkinggate:0,priority:0,stoptimeless:"",stoptimemore:"",atimeless:"",atimemore:"",dtimeless:"",dtimemore:""};this.settingTableData.push(o)}}},watch:{selectType:function(){var t=this;if(""!==this.selectType){var e=this.typeList.findIndex(function(e){if(e.id==t.selectType)return!0}),a=this.typeListSetting.findIndex(function(a){if(a.flighttype==t.typeList[e].flighttype)return!0});this.selectTypeSetting=a;var i={airportname:this.$store.state.airportNameVuex,flighttype:this.typeList[e].flighttype,userId:window.sessionStorage.usernamen};Object(l.C)(i).then(function(e){t.tableData=JSON.parse(s()(e.data)),t.totalCount=t.tableData.length,t.subTableData=JSON.parse(s()(t.tableData)),t.settingTableData=JSON.parse(s()(t.tableData)),t.subSettingTableData=JSON.parse(s()(t.settingTableData)),t.temp=t.subTableData[0].template})}},selectTypeSetting:function(){var t=this,e=this.typeListSetting.findIndex(function(e){if(e.id==t.selectTypeSetting)return!0}),a=this.typeList.findIndex(function(a){if(a.flighttype==t.typeListSetting[e].flighttype)return!0});if(-1!==a){this.selectType=this.typeList[a].id;var i={airportname:this.$store.state.airportNameVuex,flighttype:this.typeListSetting[e].flighttype,userId:window.sessionStorage.usernamen};Object(l.C)(i).then(function(e){t.tableData=JSON.parse(s()(e.data)),t.totalCount=t.tableData.length,t.subTableData=JSON.parse(s()(t.tableData)),t.settingTableData=JSON.parse(s()(e.data)),t.temp=e.data[0].template})}else this.tableData=[],this.totalCount=0,this.settingTableData=[],this.subSettingTableData=[],this.temp=0},settingTableData:{handler:function(t,e){this.subSettingTableData=JSON.parse(s()(t))},deep:!0},temp:function(){for(var t=[],e=0;e<this.settingTableData.length;e++){var a={airportname:this.settingTableData[e].airportname,atimeless:"",atimemore:"",dtimeless:"",dtimemore:"",flightkey:this.settingTableData[e].flightkey,flighttype:this.settingTableData[e].flighttype,id:this.settingTableData[e].id,parkinggate:this.settingTableData[e].parkinggate,priority:this.settingTableData[e].priority,stoptimeless:"",stoptimemore:"",template:this.temp};t.push(a)}this.settingTableData=JSON.parse(s()(t))}},created:function(){var t=this,e={airportname:this.$store.state.airportNameVuex,userId:window.sessionStorage.usernamen};Object(l.I)(e).then(function(e){t.typeList=[];for(var a=0;a<e.data.length;a++){var i={id:a,flighttype:e.data[a].flighttype};t.typeList.push(i)}});var a={airportname:this.$store.state.airportNameVuex};Object(l.F)(a).then(function(e){t.parkingGateList=[],t.parkingGateList=JSON.parse(s()(e.data));for(var a=t.parkingGateList.length,i=0;i<a;i++){var l={id:i+1,priority:i+1};t.priorityList.push(l)}})}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-setting"}),t._v(" 规则库\n      ")]),t._v(" "),a("el-breadcrumb-item",[t._v("机位资源优先级配置")])],1)],1),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("span",{staticClass:"selectData"},[t._v("航班类型:")]),t._v(" "),a("el-select",{staticClass:"handle-select",attrs:{placeholder:"请选择航班类型"},model:{value:t.selectType,callback:function(e){t.selectType=e},expression:"selectType"}},t._l(t.typeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.flighttype,value:t.id}})}),1),t._v(" "),a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-s-tools"},on:{click:t.openPrioritySettingDialog}},[t._v("配置机位优先级")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData.slice((t.currentPage-1)*t.PageSize,t.currentPage*t.PageSize),border:"","header-cell-class-name":"table-header","row-key":"id"}},[a("el-table-column",{attrs:{prop:"airportname",label:"机场名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"flighttype",label:"航班类型名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"flightkey",label:"航班类型Key",align:"center"}}),t._v(" "),1==this.temp?a("el-table-column",{attrs:{prop:"stoptimeless",label:"停靠时间小于",align:"center"}}):t._e(),t._v(" "),1==this.temp?a("el-table-column",{attrs:{prop:"stoptimemore",label:"停靠时间大于",align:"center"}}):t._e(),t._v(" "),2==this.temp?a("el-table-column",{attrs:{prop:"atimeless",label:"进港时间小于",align:"center"}}):t._e(),t._v(" "),2==this.temp?a("el-table-column",{attrs:{prop:"atimemore",label:"进港时间大于",align:"center"}}):t._e(),2==this.temp?a("el-table-column",{attrs:{prop:"dtimeless",label:"出港时间小于",align:"center"}}):t._e(),t._v(" "),2==this.temp?a("el-table-column",{attrs:{prop:"dtimemore",label:"出港时间大于",align:"center"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"parkinggate",label:"机位",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"priority",label:"优先级",align:"center"}})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.PageSize,total:t.totalCount},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1),t._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{visible:t.prioritySettingDialog,width:"70%",title:"航班分配顺序配置"},on:{"update:visible":function(e){t.prioritySettingDialog=e}}},[a("span",{staticClass:"selectData"},[t._v("航班类型:")]),t._v(" "),a("el-select",{staticClass:"handle-select",attrs:{placeholder:"请选择航班类型"},model:{value:t.selectTypeSetting,callback:function(e){t.selectTypeSetting=e},expression:"selectTypeSetting"}},t._l(t.typeListSetting,function(t){return a("el-option",{key:t.id,attrs:{label:t.flighttype,value:t.id}})}),1),t._v(" "),a("span",{staticClass:"selectData"},[t._v("模板类型:")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.temp,callback:function(e){t.temp=e},expression:"temp"}},t._l(t.tempList,function(t){return a("el-option",{key:t.id,attrs:{label:t.tempName,value:t.id}})}),1),t._v(" "),a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:t.addSettintData}},[t._v("新增")]),t._v(" "),a("div",{staticClass:"tempContent"},[a("div",{staticClass:"tempTable"},[a("transition-group",{attrs:{appear:"",tag:"div"}},t._l(t.settingTableData,function(e){return a("div",{key:e.id,staticClass:"tr1"},[a("span",[t._v("机位:")]),t._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择机位"},model:{value:e.parkinggate,callback:function(a){t.$set(e,"parkinggate",a)},expression:"items.parkinggate"}},t._l(t.parkingGateList,function(t){return a("el-option",{key:t.id,attrs:{label:t.parkinggate,value:t.id}})}),1),t._v(" "),a("span",[t._v("优先级:")]),t._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择优先级"},model:{value:e.priority,callback:function(a){t.$set(e,"priority",a)},expression:"items.priority"}},t._l(t.priorityList,function(t){return a("el-option",{key:t.id,attrs:{label:t.priority,value:t.id}})}),1),t._v(" "),1==t.temp?a("span",[t._v("停靠时间小于:")]):t._e(),t._v(" "),1==t.temp?a("el-input",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.stoptimeless,callback:function(a){t.$set(e,"stoptimeless",a)},expression:"items.stoptimeless"}}):t._e(),t._v(" "),1==t.temp?a("span",[t._v("停靠时间大于:")]):t._e(),t._v(" "),1==t.temp?a("el-input",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.stoptimemore,callback:function(a){t.$set(e,"stoptimemore",a)},expression:"items.stoptimemore"}}):t._e(),t._v(" "),2==t.temp?a("span",[t._v("进港时间小于:")]):t._e(),t._v(" "),2==t.temp?a("el-input",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.atimeless,callback:function(a){t.$set(e,"atimeless",a)},expression:"items.atimeless"}}):t._e(),t._v(" "),2==t.temp?a("span",[t._v("进港时间大于:")]):t._e(),t._v(" "),2==t.temp?a("el-input",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.atimemore,callback:function(a){t.$set(e,"atimemore",a)},expression:"items.atimemore"}}):t._e(),t._v(" "),2==t.temp?a("span",[t._v("出港时间小于:")]):t._e(),t._v(" "),2==t.temp?a("el-input",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.dtimeless,callback:function(a){t.$set(e,"dtimeless",a)},expression:"items.dtimeless"}}):t._e(),t._v(" "),2==t.temp?a("span",[t._v("出港时间大于:")]):t._e(),t._v(" "),2==t.temp?a("el-input",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:e.dtimemore,callback:function(a){t.$set(e,"dtimemore",a)},expression:"items.dtimemore"}}):t._e(),t._v(" "),a("el-button",{staticClass:"handle-del mr10",attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.delSettintData(e.id)}}},[t._v("删除")])],1)}),0)],1)]),t._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.prioritySettingCancel}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.prioritySettingConfirm}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var o=a("C7Lr")(r,p,!1,function(t){a("Bdvm"),a("JzDN")},"data-v-aef8e606",null);e.default=o.exports}});
//# sourceMappingURL=7.3249f77dadbdca12df38.js.map